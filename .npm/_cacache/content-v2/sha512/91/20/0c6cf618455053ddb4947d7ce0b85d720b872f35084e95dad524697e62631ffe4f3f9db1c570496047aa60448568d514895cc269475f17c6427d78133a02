{"_rev":"2-f503873636f6e00e7a58811e058cedbd","time":{"created":"2023-07-31T10:19:53.724Z","1.0.0":"2023-07-30T09:58:41.263Z","modified":"2023-07-31T10:19:54.014Z","0.0.1":"2023-07-31T10:19:53.858Z"},"_id":"telebirr-receipt","name":"telebirr-receipt","dist-tags":{"latest":"0.0.1"},"versions":{"0.0.1":{"name":"telebirr-receipt","description":"Telebirr transaction receipt parser and verifier","version":"0.0.1","author":{"name":"Yonathan Tesfaye","email":"yt040448@gmail.com"},"main":"index.js","scripts":{"start":"node index.js","test":"echo \"Error: no test specified\" && exit 1"},"keywords":["telebirr","payment","gateway","api","parse","transaction"],"license":"Apache-2.0","repository":{"type":"git","url":"git://github.com/TheRealYT/telebirr-receipt.git"},"dependencies":{"htmlparser2":"^9.0.0"},"gitHead":"d0b36b06958176f08eed606180638270fc03652c","bugs":{"url":"https://github.com/TheRealYT/telebirr-receipt/issues"},"homepage":"https://github.com/TheRealYT/telebirr-receipt#readme","_id":"telebirr-receipt@0.0.1","_nodeVersion":"18.13.0","_npmVersion":"9.7.1","dist":{"integrity":"sha512-VHK+0vrAejTiatjQZR20f5hlWpLXEbuNmLTVzjycU3NiP2MfeEJQLxeR7t2/mpc6yoi/lhYZJzZSgNhVsl9cAw==","shasum":"3282847094e341dc3e81151f353057ab6d829785","tarball":"https://registry.npmjs.org/telebirr-receipt/-/telebirr-receipt-0.0.1.tgz","fileCount":4,"unpackedSize":12320,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQDlUWB7kLjQjuD7EGuSt4WXMQ5Kq4WMYLYB2Qwjd1eTtwIhAOp5nMuStff7fW1fD8lmmZQrgRV0Sko0x4OCWAyCUzYZ"}]},"_npmUser":{"name":"yonathantesfaye","email":"yt040448@gmail.com"},"directories":{},"maintainers":[{"name":"yonathantesfaye","email":"yt040448@gmail.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/telebirr-receipt_0.0.1_1690798793727_0.475904267642141"},"_hasShrinkwrap":false}},"maintainers":[{"name":"yonathantesfaye","email":"yt040448@gmail.com"}],"description":"Telebirr transaction receipt parser and verifier","homepage":"https://github.com/TheRealYT/telebirr-receipt#readme","keywords":["telebirr","payment","gateway","api","parse","transaction"],"repository":{"type":"git","url":"git://github.com/TheRealYT/telebirr-receipt.git"},"author":{"name":"Yonathan Tesfaye","email":"yt040448@gmail.com"},"bugs":{"url":"https://github.com/TheRealYT/telebirr-receipt/issues"},"license":"Apache-2.0","readme":"# telebirr-receipt\n\n### What is telebirr-receipt\n\n`telebirr-receipt` Is a small nodejs package to parse and verify\ntelebirr transaction receipt. Any telebirr transaction\nreceipt can be found through the url\n`https://transactioninfo.ethiotelecom.et/receipt/{receipt_no}`\nby replacing `{receipt_no}` with receipt number or id which is sent from telebirr\ntransaction SMS or the full receipt url is also sent via SMS.\n\n### How to install\n\n``\nnpm install telebirr-receipt\n``\n\n### Basic usage\n\n#### Loading receipt from url\n\n```javascript\nconst {receipt, utils: {loadReceipt, parseFromHTML}} = require('telebirr-receipt')\n\n// use it with caution / security warning\nprocess.env['NODE_TLS_REJECT_UNAUTHORIZED'] = 0\n\n// TODO: replace `receiptNo`\nloadReceipt({receiptNo: 'ADQ...'}).then(htmlAsString => {\n    const {verify, verifyOnly, verifyAll, equals} = receipt(parseFromHTML(htmlAsString), {to: 'Someone'})\n    verify((parsedFields, preDefinedFields) => {\n        // do anything with receipt\n    })\n}).catch(reason => {\n    console.error(reason)\n}).finally(() => {\n    process.env['NODE_TLS_REJECT_UNAUTHORIZED'] = 1\n})\n```\n\n#### Using custom receipt parser with custom string source\n\n```javascript\nconst {receipt} = require('telebirr-receipt');\n\nfunction parse() {\n    const source = 'payer_name=Abebe;amount=5000;to=Kebede'\n    const result = {};\n\n    source.split(';').forEach(pair => {\n        const field = pair.split('=');\n        result[field[0]] = field[1];\n    });\n\n    return result;\n}\n\nconst {verifyAll, verify, equals} = receipt(parse(), {to: 'Kebede', amount: '5000'})\n\n// match expected receiver's name with the name found on receipt\nconsole.log(verify((parsedInfo, myInfo) => equals(parsedInfo?.to, myInfo?.to))) // match any field\n\nconsole.log(verifyAll(['payer_name'])) // match every field but `payer_name`\n```\n\n### Use case\n\nThe main use case of this project is to overcome payment api unavailability and requirements in Ethiopia. Based on this\nproject you can get paid and verify your payment transactions.\n\n1. Your customers may fill their personal or payment information\n2. Your customers pay you via telebirr\n3. You let your customers know how to verify their payment by entering their transaction number or link which is\n   received from 127 / telebirr SMS.\n4. So you can verify that who send the money to you.\n\n### IMPORTANT\n\nThe telebirr receipt website may be modified or changed at anytime, so it is important to test HTML parser every time\nbefore letting users pay and before verifying.\nYou could test the parser simply by hard coding a sample transaction information manually and matching it with parsed\nfrom url.\n\n### Known issues\n\n1. `loadReceipt` fails with error: `unable to verify the first certificate`, code: `UNABLE_TO_VERIFY_LEAF_SIGNATURE`.\n   Disabling certificate verification could fix the problem, but it is not recommended.\n   Let me know if there is good solution to this problem.\n2. `parseFromHTML` may return different receipt field values or even empty and omit field values because of\n   the variability of the receipt website based on transaction such as transferring to bank and direct telebirr\n   transferring have different receipt format and soon. Thus, you should take a look at the return data of the\n   function `parseFromHTML` for different transaction destinations.\n\n### DISCLAIMER\n\nThe open-source code provided is offered \"as is\" without warranty of any kind, either express or implied, including, but\nnot limited to, the implied warranties of merchantability and fitness for a particular purpose. The author of this code\nshall not be liable for any damages arising from the use of this code, including, but not limited to, direct, indirect,\nincidental, special, or consequential damages.\n\nUsers of this open-source code are solely responsible for testing and verifying the code's suitability for their\nspecific purposes. The author of this code makes no representations or warranties about the code's accuracy,\nreliability, completeness, or timeliness. The user assumes all risk associated with the use of this code and agrees to\nindemnify and hold harmless the author of this code from any and all claims, damages, or liabilities arising from the\nuse of this code.\n\nBy using this open-source code, the user acknowledges and agrees to these terms and conditions.\n","readmeFilename":"README.md"}